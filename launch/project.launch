<launch>
  <!-- topics -->
  <arg name="image_topic" default="/camera/color/image_raw"/>
  <arg name="camera_info_topic" default="/camera/color/camera_info"/>
  <arg name="lidar_topic" default="/livox/lidar"/>
  <arg name="lidar_msg_type" default="LivoxCustom"/>

  <!-- whether to start rviz -->
  <arg name="start_rviz" default="true"/>

  <!-- LiDAR -> Image projector -->
  <node pkg="lidar_camera_projection"
        type="project_lidar_to_image.py"
        name="lidar_to_image_projector"
        output="screen"
        required="true">
    <param name="image_topic" value="$(arg image_topic)"/>
    <param name="camera_info_topic" value="$(arg camera_info_topic)"/>
    <param name="lidar_topic" value="$(arg lidar_topic)"/>
    <param name="lidar_msg_type" value="$(arg lidar_msg_type)"/>
    <rosparam command="load" file="$(find lidar_camera_projection)/config/extrinsics.yaml"/>
  </node>

  <!-- RViz (projected image 확인용) -->
  <group if="$(arg start_rviz)">
    <node pkg="rviz" type="rviz" name="rviz"
          args="-d $(find lidar_camera_projection)/rviz/rviz.rviz"
          output="screen"/>
  </group>
</launch>

